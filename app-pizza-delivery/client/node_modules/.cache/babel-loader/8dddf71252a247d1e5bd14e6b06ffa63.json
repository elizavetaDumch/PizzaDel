{"remainingRequest":"C:\\Users\\Liza\\app-pizza-delivery\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Liza\\app-pizza-delivery\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Liza\\app-pizza-delivery\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Liza\\app-pizza-delivery\\client\\src\\components\\Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Liza\\app-pizza-delivery\\client\\src\\components\\Cart.vue","mtime":1620822278050},{"path":"C:\\Users\\Liza\\app-pizza-delivery\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Liza\\app-pizza-delivery\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Liza\\app-pizza-delivery\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Liza\\app-pizza-delivery\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL0xpemEvYXBwLXBpenphLWRlbGl2ZXJ5L2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy9pbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnCmltcG9ydCBjb3Vwb25zIGZyb20gIi4uL19kYXRhL2NvdXBvbnMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNhcnQiLAogIHByb3BzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY291cG9uczogY291cG9ucywKICAgICAgcHJvbW9jb2RlOiBudWxsLAogICAgICBhY2NlcHRlZFByb21vY29kZToge30sCiAgICAgIHRydWVQcm9tb2tvZGVNZXNzYWdlOiBmYWxzZSwKICAgICAgZmFsc2VQcm9tb2tvZGVNZXNzYWdlOiBmYWxzZSwKICAgICAgZG9wSW5ncmVkaWVudHM6IFt7CiAgICAgICAgbmFtZTogItCh0YvRgCDRh9C10LTQtNC10YAiLAogICAgICAgIHZhbHVlOiAiQ2hlZGRlciBjaGVlc2UiLAogICAgICAgIHByaWNlOiAzLjgwCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAi0J/QtdGA0LXRhiDRhdCw0LvQsNC/0LXQvdGM0L4iLAogICAgICAgIHZhbHVlOiAiSmFsYXBlbm8gcGVwcGVyIiwKICAgICAgICBwcmljZTogMi41CiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAi0J7RgdGC0YDQsNGPINC60YPRgNC+0YfQutCwIiwKICAgICAgICB2YWx1ZTogIlNwaWN5IGNoaWNrZW4iLAogICAgICAgIHByaWNlOiAzCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAi0KLQvtC80LDRgiIsCiAgICAgICAgdmFsdWU6ICJUb21hdG8iLAogICAgICAgIHByaWNlOiAyCiAgICAgIH1dCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGFjY2VwdGVkUHJvbW9jb2RlOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIobmV3VmFsdWUpIHsKICAgICAgICB0aGlzLiRlbWl0KCJzZWxlY3QiLCBuZXdWYWx1ZSk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBwcm9kdWN0czogZnVuY3Rpb24gcHJvZHVjdHMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jYXJ0OwogICAgfSwKICAgIGNhcnRUb3RhbENvc3Q6IGZ1bmN0aW9uIGNhcnRUb3RhbENvc3QoKSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKCiAgICAgIGlmICh0aGlzLnByb2R1Y3RzLmxlbmd0aCkgewogICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLnByb2R1Y3RzKSwKICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgcHJvZHVjdCA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICByZXN1bHQucHVzaChwcm9kdWN0LnByaWNlICogcHJvZHVjdC5xdWFudGl0eSk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlZHVjZShmdW5jdGlvbiAoc3VtLCBlbCkgewogICAgICAgICAgcmV0dXJuIHN1bSArIGVsOwogICAgICAgIH0pOwogICAgICAgIHJlc3VsdCA9IHRoaXMuYWNjZXB0ZWRQcm9tb2NvZGUudmFsdWUgPyByZXN1bHQgKiAoMTAwIC0gdGhpcy5hY2NlcHRlZFByb21vY29kZS52YWx1ZSkgLyAxMDAgOiByZXN1bHQ7CgogICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5wcm9kdWN0cyksCiAgICAgICAgICAgIF9zdGVwMjsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBfcHJvZHVjdCA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICAgIF9wcm9kdWN0LnNlbGVjdGVkSW5ncmVkaWVudHMuZm9yRWFjaChmdW5jdGlvbiAoaW5ncmVkaWVudFByaWNlKSB7CiAgICAgICAgICAgICAgcmVzdWx0ICs9IGluZ3JlZGllbnRQcmljZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByZW1vdmVQcm9kdWN0OiBmdW5jdGlvbiByZW1vdmVQcm9kdWN0KGluZGV4KSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgicmVtb3ZlUHJvZHVjdCIsIGluZGV4KTsgLy90aGlzLiRlbWl0KCdvbkFkZFRvQ2FydCcsIHRoaXMucHJvZHVjdC5pZCkKICAgIH0sCgogICAgLypyZW1vdmVQcm9kdWN0OiBmdW5jdGlvbihpbmRleCkgewogICAgICB0aGlzLnByb2R1Y3RzLnNwbGljZShpbmRleCwgMSkKICAgIH0sKi8KICAgIGRlY3JlYXNlUXVhbnRpdHk6IGZ1bmN0aW9uIGRlY3JlYXNlUXVhbnRpdHkoaW5kZXgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJkZWNyZWFzZVF1YW50aXR5IiwgaW5kZXgpOwogICAgfSwKICAgIGluY3JlYXNlUXVhbnRpdHk6IGZ1bmN0aW9uIGluY3JlYXNlUXVhbnRpdHkoaW5kZXgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJpbmNyZWFzZVF1YW50aXR5IiwgaW5kZXgpOwogICAgfSwKICAgIGNoZWNrUHJvbW9rb2Q6IGZ1bmN0aW9uIGNoZWNrUHJvbW9rb2QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZXhpc3RlZENvdXBvbiA9IHRoaXMuY291cG9ucy5maW5kKGZ1bmN0aW9uIChjb3Vwb24pIHsKICAgICAgICByZXR1cm4gX3RoaXMucHJvbW9jb2RlID09IGNvdXBvbi5jb2RlOwogICAgICB9KTsKCiAgICAgIGlmIChleGlzdGVkQ291cG9uKSB7CiAgICAgICAgdGhpcy5hY2NlcHRlZFByb21vY29kZSA9IGV4aXN0ZWRDb3Vwb247CiAgICAgICAgdGhpcy50cnVlUHJvbW9rb2RlTWVzc2FnZSA9IHRydWU7CiAgICAgICAgdGhpcy5mYWxzZVByb21va29kZU1lc3NhZ2UgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjY2VwdGVkUHJvbW9jb2RlID0ge307CiAgICAgICAgdGhpcy50cnVlUHJvbW9rb2RlTWVzc2FnZSA9IGZhbHNlOwogICAgICAgIHRoaXMuZmFsc2VQcm9tb2tvZGVNZXNzYWdlID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container p-4\">\n    <div class=\"cart\">\n      <h2>Корзина</h2>\n      <div class=\"cart-item\">\n        <div v-for=\"(product, index) in products\" v-bind:key=\"product.id\">\n          <div class=\"row\">\n            <div class=\"col-auto\">\n              <img :src=\"product.img\" width=\"200\" class=\"rounded\" />\n            </div>\n            <div class=\"col text-left\">\n              <div class=\"py-4\">\n                <h3 :href=\"product.url\">\n                  {{ product.name }}\n                </h3>\n              </div>\n              <div>\n                <span class=\"muted\">Cтоимость:</span> {{ product.price }} руб\n              </div>\n              <br />\n              <div class=\"cart-item-quantity\">\n                <p>Количество:</p>\n                <div>\n                  <b-button\n                    pill\n                    variant=\"outline-secondary \"\n                    @click=\"decreaseQuantity(index)\"\n                    >-</b-button\n                  >\n                  {{ product.quantity }}\n                  <b-button\n                    pill\n                    variant=\"outline-secondary\"\n                    @click=\"increaseQuantity(index)\"\n                    >+</b-button\n                  >\n                </div>\n              </div>\n\n              <div>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-danger ml-5\"\n                  @click=\"removeProduct(index)\"\n                >\n                  Удалить\n                </button>\n              </div>\n              <br />\n\n              <div class=\"dop-ingredients\">\n                <h5>Дополнительные ингредиенты:</h5>\n                <div class=\"form-check\" v-for=\"(ingredient, index) in dopIngredients\" v-bind:key=\"index\">\n                  <input\n                    class=\"form-check-input\"\n                    type=\"checkbox\"\n                    v-model=\"product.selectedIngredients\"\n                    :value=\"ingredient.price\"                    \n                    :id=\"`ing${product.id}${index}`\"\n                  />\n                  <label class=\"form-check-label\" :for=\"`ing${product.id}${index}`\">\n                    {{ingredient.name}} ({{ingredient.price}} руб)\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"form-group col-md-2 mt-3 ml-3\">\n        <label for=\"inputPromokod\">Промокод</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"promocode\" />\n        <button\n          type=\"button\"\n          class=\"btn btn-light ml-4\"\n          @click=\"checkPromokod()\"\n        >\n          Применить\n        </button>\n        <p class=\"trueMessagePromokode ml-1\" v-show=\"truePromokodeMessage\">\n          Промокод применён\n        </p>\n        <p class=\"falseMessagePromokode\" v-show=\"falsePromokodeMessage\">\n          Промокода не найдено\n        </p>\n      </div>\n      <div class=\"totalSum\">\n        <p>Итоговая стоимость:</p>\n        <p class=\"totalCost ml-1\">{{ cartTotalCost }} pуб</p>\n      </div>\n\n      <router-link v-if=\"products.length > 0\" :to=\"{ name: 'Order' }\">\n        <a button type=\"button\" class=\"btn btn-outline-danger\">\n          Перейти к оформлению заказа\n        </a>\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\n//import { mapState } from 'vuex'\nimport coupons from \"../_data/coupons\";\n\nexport default {\n  name: \"Cart\",\n  props: {},\n  data: () => {\n    return {      \n      coupons: coupons,\n      promocode: null,\n      acceptedPromocode: {},\n      truePromokodeMessage: false,\n      falsePromokodeMessage: false,\n      dopIngredients: [\n        {\n          name: \"Сыр чеддер\",\n          value: \"Chedder cheese\",\n          price: 3.80\n        },\n        {\n          name: \"Перец халапеньо\",\n          value: \"Jalapeno pepper\",\n          price: 2.5\n        },\n        {\n          name: \"Острая курочка\",\n          value: \"Spicy chicken\",\n          price:3\n        },\n        {\n          name: \"Томат\",\n          value: \"Tomato\",\n          price: 2\n        }\n      ],\n    };\n  },\n  watch: {\n    acceptedPromocode: {\n      handler(newValue) {\n        this.$emit(\"select\", newValue);\n      },\n    },\n  },\n  computed: {\n    products: function () {\n      return this.$store.state.cart;\n    },\n    cartTotalCost: function () {\n      let result = [];\n      if (this.products.length) {\n        for (let product of this.products) {\n          result.push(product.price * product.quantity);\n        }\n        result = result.reduce(function (sum, el, ) {\n          return sum + el ;\n        });\n        result = this.acceptedPromocode.value\n          ? (result * (100 - this.acceptedPromocode.value)) / 100\n          : result;\n        \n        for (let product of this.products) {          \n          product.selectedIngredients.forEach(ingredientPrice => {\n            result += ingredientPrice\n          })\n        }\n        return result;\n      } else {\n        return 0;\n      }\n    },   \n  },\n  methods: {\n    removeProduct: function (index) {\n      this.$store.commit(\"removeProduct\", index);\n      //this.$emit('onAddToCart', this.product.id)\n    },\n    /*removeProduct: function(index) {\n      this.products.splice(index, 1)\n    },*/\n    decreaseQuantity: function (index) {\n      this.$store.commit(\"decreaseQuantity\", index);\n    },\n    increaseQuantity: function (index) {\n      this.$store.commit(\"increaseQuantity\", index);\n    },\n    checkPromokod: function () {\n      let existedCoupon = this.coupons.find(\n        (coupon) => this.promocode == coupon.code\n      );\n      if (existedCoupon) {\n        this.acceptedPromocode = existedCoupon;\n        this.truePromokodeMessage = true;   \n        this.falsePromokodeMessage = false;\n      } else {\n        this.acceptedPromocode = {};\n        this.truePromokodeMessage = false;\n        this.falsePromokodeMessage = true;\n      }\n    },   \n  },\n};\n</script>\n\n<style scoped>\n.cart {\n  flex-basis: 25%;\n  box-shadow: 0 0 8px 0 #e0e0e0;\n  padding: padding * 2;\n  margin-bottom: margin * 2;\n}\n.totalSum {\n  display: flex;\n  justify-content: center;\n  font-size: 20px;\n}\n.totalCost {\n  margin-left: margin * 2;\n}\n.trueMessagePromokode {\n  color: rgb(23, 181, 23);\n}\n.falseMessagePromokode {\n  color: red;\n}\n</style>\n"],"sourceRoot":"src/components"}]}